function Slider(input,slider,min,max,visualUpdate,sliderWidth,intOnly,logConstant){function getLeftOffset(x){return min>x?-markWidth/2>>0:x>max?sliderWidth-markWidth/2>>0:Math.pow((x-min)/(max-min),logConstant)*sliderWidth-markWidth/2>>0}function getX(left){return Math.pow((left+markWidth/2)/sliderWidth,1/logConstant)*(max-min)+min}function draw(){mark.css("left",getLeftOffset(value))}function update(x){visualUpdate(x),input&&input.val(x)}function mousedown(e){e.preventDefault(),initLeft=parseInt(mark.css("left")),initX=e.clientX,$("body").addClass("nosel"),$(d).mousemove(mousemove),$(d).mouseup(mouseup)}function mousemove(e){e.preventDefault(),newLeft=e.clientX-initX+initLeft>>0,-markWidth/2>newLeft?newLeft=-markWidth/2:newLeft>sliderWidth-markWidth/2&&(newLeft=sliderWidth-markWidth/2),mark.css("left",newLeft),value=getX(newLeft),update(intOnly?value>>0:value)}function mouseup(){$("body").removeClass("nosel"),$(d).off("mousemove",mousemove).off("mouseup",mouseup)}var d=document;slider=$(slider),input&&(input=$(input)),logConstant||(logConstant=1);var initX,initLeft,newLeft,markWidth=17,mark=$("<div/>",{"class":"mark",width:markWidth}),value=min;slider.addClass("slider").width(sliderWidth).append(mark),this.set=function(x){value=x,input&&input.val(x),draw()},this.setBG=function(color){slider.css("background",color)},input&&(value=input.val(),input.change(function(){value=input.val(),draw(),visualUpdate(value)})),mark.mousedown(mousedown),draw()}